#pragma config(Sensor, S1,     HTSPB,                sensorI2CCustom9V)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "include/hitechnic-superpro.h"
int inputdata;
task analogThread() {
	while(true){
		 inputdata = HTSPBreadADC(HTSPB, A0, 10);
	}
}
byte bits
int a=0;
int goodCount = 0;
int badCount = 0;
float bad = 0;
task digitalThread() {
	// Set B0 for output
  a = HTSPBsetupIO(HTSPB, 0b00000001);

  while(true) {
		bits = HTSPBreadIO(HTSPB,0b11111110);
		if(bits == 6)
		{
			goodCount++;
		}
		else
		{
			badCount++;
		}
		bad = (badCount/(float)(goodCount+badCount))*100;
  }
}

task main() {
  HTSPBEnable(); //require to initialize semaphore
  startTask(analogThread);
  startTask(digitalThread);
  while(true){};
}
